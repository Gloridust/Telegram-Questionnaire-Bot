# Telegram Questionnaire Bot

ä¸€ä¸ªåŸºäº Python çš„ Telegram é—®å·è°ƒæŸ¥æœºå™¨äººï¼Œæ”¯æŒç®¡ç†å‘˜åˆ›å»ºé—®å·ã€ç”¨æˆ·å¡«å†™é—®å·ã€æŸ¥çœ‹ç»Ÿè®¡å’Œå¯¼å‡ºç»“æœã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”§ ç®¡ç†å‘˜åŠŸèƒ½
- åˆ›å»ºä»»æ„æ•°é‡çš„é—®å·è°ƒæŸ¥
- æ”¯æŒå¤šé€‰é¢˜å’Œä¸»è§‚é¢˜
- é—®å·çŠ¶æ€ç®¡ç†ï¼ˆè‰ç¨¿ã€æ¿€æ´»ã€å…³é—­ï¼‰
- æŸ¥çœ‹é—®å·ç»Ÿè®¡æ•°æ®
- å¯¼å‡ºè¯¦ç»†ç»“æœåˆ° Excel

### ğŸ“‹ ç”¨æˆ·åŠŸèƒ½
- æµè§ˆå¯ç”¨é—®å·
- é€æ­¥å¡«å†™é—®å·
- è‡ªåŠ¨ä¿å­˜ç­”æ¡ˆè¿›åº¦

### ğŸ¯ UX è®¾è®¡
- ç›´è§‚çš„å†…è”é”®ç›˜æ“ä½œ
- æ¸…æ™°çš„æ­¥éª¤æŒ‡å¯¼
- é”™è¯¯å¤„ç†å’ŒéªŒè¯
- å¤šè¯­è¨€æ”¯æŒï¼ˆè‹±æ–‡ç•Œé¢ï¼‰

## å®‰è£…é…ç½®

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd Telegram-Questionnaire-Bot
```

### 2. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 3. é…ç½®æœºå™¨äºº
ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é…ç½®ä¿¡æ¯ï¼š

```python
class Config:
    # Bot configuration
    BOT_TOKEN = 'your_telegram_bot_token_here'
    
    # Admin configuration (list of user IDs)
    ADMIN_USER_IDS = [
        123456789,  # Replace with actual admin user IDs
        987654321,  # Add more admin IDs as needed
    ]
    
    # Other settings remain as default
```

### 4. è·å– Bot Token
1. åœ¨ Telegram ä¸­æ‰¾åˆ° [@BotFather](https://t.me/BotFather)
2. å‘é€ `/newbot` åˆ›å»ºæ–°æœºå™¨äºº
3. æŒ‰ç…§æŒ‡ç¤ºè®¾ç½®æœºå™¨äººåç§°å’Œç”¨æˆ·å
4. å¤åˆ¶è·å¾—çš„ Token åˆ° `config.py` æ–‡ä»¶ä¸­

### 5. è·å–ç”¨æˆ· ID
1. åœ¨ Telegram ä¸­æ‰¾åˆ° [@userinfobot](https://t.me/userinfobot)
2. å‘é€ä»»æ„æ¶ˆæ¯è·å–ä½ çš„ç”¨æˆ· ID
3. å°†ç®¡ç†å‘˜çš„ç”¨æˆ· ID æ·»åŠ åˆ° `config.py` æ–‡ä»¶çš„ `ADMIN_USER_IDS` åˆ—è¡¨ä¸­

### 6. è¿è¡Œæœºå™¨äºº
```bash
python bot.py
```

## ä½¿ç”¨è¯´æ˜

### ç®¡ç†å‘˜æ“ä½œæµç¨‹

#### 1. åˆ›å»ºé—®å·
```
/create_questionnaire
```
- è¾“å…¥é—®å·æ ‡é¢˜
- è¾“å…¥é—®å·æè¿°
- æ·»åŠ é—®é¢˜ï¼š
  - å¤šé€‰é¢˜ï¼š`mc: é—®é¢˜å†…å®¹? é€‰é¡¹1, é€‰é¡¹2, é€‰é¡¹3`
  - ä¸»è§‚é¢˜ï¼š`text: é—®é¢˜å†…å®¹?`
- è¾“å…¥ `done` å®Œæˆåˆ›å»º

#### 2. ç®¡ç†é—®å·
```
/my_questionnaires
```
- æŸ¥çœ‹æ‰€æœ‰é—®å·
- æ¿€æ´»è‰ç¨¿çŠ¶æ€çš„é—®å·
- å…³é—­æ´»è·ƒçš„é—®å·
- æŸ¥çœ‹é—®å·ç»Ÿè®¡

#### 3. æŸ¥çœ‹ç»“æœ
```
/view_results
```
- é€‰æ‹©é—®å·æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
- æŸ¥çœ‹å‚ä¸äººæ•°å’Œå®Œæˆæƒ…å†µ

#### 4. å¯¼å‡ºæ•°æ®
```
/export_results
```
- é€‰æ‹©é—®å·å¯¼å‡º Excel æ–‡ä»¶
- åŒ…å«æ‰€æœ‰ç”¨æˆ·çš„è¯¦ç»†å›ç­”

### ç”¨æˆ·æ“ä½œæµç¨‹

#### 1. æŸ¥çœ‹å¯ç”¨é—®å·
```
/surveys
```

#### 2. å‚ä¸é—®å·
- ç‚¹å‡»"ğŸš€ Start Survey"æŒ‰é’®
- é€æ­¥å›ç­”é—®é¢˜
- ç³»ç»Ÿè‡ªåŠ¨ä¿å­˜è¿›åº¦

#### 3. è·å–å¸®åŠ©
```
/help
```

## é¡¹ç›®æ¶æ„

```
Telegram-Questionnaire-Bot/
â”œâ”€â”€ bot.py              # ä¸»æœºå™¨äººé€»è¾‘
â”œâ”€â”€ config.py           # é…ç½®ç®¡ç† (éœ€è¦ç¼–è¾‘)
â”œâ”€â”€ config.example.py   # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ database.py         # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ models.py           # æ•°æ®æ¨¡å‹å®šä¹‰
â”œâ”€â”€ utils.py            # å·¥å…·å‡½æ•°
â”œâ”€â”€ requirements.txt    # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ CONFIG_GUIDE.md     # è¯¦ç»†é…ç½®æŒ‡å—
â””â”€â”€ README.md          # é¡¹ç›®è¯´æ˜
```

## æ•°æ®åº“ç»“æ„

### è¡¨ç»“æ„
- `users` - ç”¨æˆ·ä¿¡æ¯
- `questionnaires` - é—®å·ä¿¡æ¯
- `questions` - é—®é¢˜ä¿¡æ¯
- `responses` - ç”¨æˆ·å›ç­”
- `questionnaire_responses` - é—®å·å®ŒæˆçŠ¶æ€

### å…³ç³»å›¾
```
users 1:N questionnaires (åˆ›å»ºå…³ç³»)
questionnaires 1:N questions
questionnaires 1:N questionnaire_responses
questions 1:N responses
users 1:N responses
```

## å‘½ä»¤åˆ—è¡¨

### åŸºç¡€å‘½ä»¤
- `/start` - å¼€å§‹ä½¿ç”¨æœºå™¨äºº
- `/help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `/surveys` - æŸ¥çœ‹å¯ç”¨é—®å·

### ç®¡ç†å‘˜å‘½ä»¤
- `/admin` - ç®¡ç†å‘˜æ§åˆ¶é¢æ¿
- `/create_questionnaire` - åˆ›å»ºæ–°é—®å·
- `/my_questionnaires` - æŸ¥çœ‹æˆ‘çš„é—®å·
- `/view_results` - æŸ¥çœ‹é—®å·ç»“æœ
- `/export_results` - å¯¼å‡ºé—®å·æ•°æ®

## é—®é¢˜ç±»å‹

### å¤šé€‰é¢˜ (Multiple Choice)
- ç”¨æˆ·ä»é¢„å®šä¹‰é€‰é¡¹ä¸­é€‰æ‹©
- æ”¯æŒ 2-10 ä¸ªé€‰é¡¹
- ç”¨æˆ·å›å¤é€‰é¡¹ç¼–å·

### ä¸»è§‚é¢˜ (Text)
- ç”¨æˆ·è‡ªç”±è¾“å…¥æ–‡æœ¬å›ç­”
- æ”¯æŒå¤šè¡Œæ–‡æœ¬
- è‡ªåŠ¨éªŒè¯éç©º

## æŠ€æœ¯æ ˆ

- **Python 3.7+**
- **python-telegram-bot 20.7** - Telegram Bot API
- **SQLite** - æ•°æ®å­˜å‚¨
- **pandas** - æ•°æ®å¤„ç†
- **openpyxl** - Excel å¯¼å‡º

## éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ
```bash
python bot.py
```

### ç”Ÿäº§ç¯å¢ƒ
ä½¿ç”¨ systemd æˆ– docker éƒ¨ç½²ï¼š

```bash
# ä½¿ç”¨ nohup åå°è¿è¡Œ
nohup python bot.py &

# æˆ–ä½¿ç”¨ systemd æœåŠ¡
sudo systemctl start questionnaire-bot
```

## è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥ `config.py` é…ç½®æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ Bot Token æœ‰æ•ˆ
3. éªŒè¯ç®¡ç†å‘˜ ID è®¾ç½®æ­£ç¡®
4. æŸ¥çœ‹æ—¥å¿—è¾“å‡ºæ’æŸ¥é”™è¯¯

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒé—®å·åˆ›å»ºå’Œç®¡ç†
- æ”¯æŒç”¨æˆ·å¡«å†™é—®å·
- æ”¯æŒç»“æœæŸ¥çœ‹å’Œå¯¼å‡º 